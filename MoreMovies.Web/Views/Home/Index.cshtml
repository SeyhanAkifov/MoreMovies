@model MovieListViewModel
@{
    ViewData["Title"] = "Index";
}

<!-- Search Section -->
<section class="bg-gray-800 p-6 rounded-lg shadow-md max-w-5xl mx-auto mt-6 mb-12">
    <h2 class="text-xl font-semibold text-red-500 mb-4 text-center">Search Movies</h2>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Search by Genre -->
        <form asp-controller="Movie" asp-action="SearchByGenre" method="get" class="flex flex-col gap-2">
            <label for="genre-search" class="text-gray-300 text-sm">SEARCH BY GENRE</label>
            <div class="flex gap-2">
                <select name="genre" id="genre-search" class="flex-1 px-3 py-2 rounded bg-gray-900 border border-gray-700 text-white">
                    @foreach (var genre in Model.Genres)
                    {
                        <option value="@genre.Name">@genre.Name</option>
                    }
                </select>
                <button type="submit" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded text-white">GO!</button>
            </div>
        </form>

        <!-- Search by Year -->
        <form asp-controller="Movie" asp-action="SearchByYear" method="get" class="flex flex-col gap-2">
            <label for="year-search" class="text-gray-300 text-sm">SEARCH BY YEAR</label>
            <div class="flex gap-2">
                <input type="text" name="year" id="year-search" placeholder="Enter year"
                       class="flex-1 px-3 py-2 rounded bg-gray-900 border border-gray-700 text-white" />
                <button type="submit" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded text-white">GO!</button>
            </div>
        </form>

        <!-- Search by Name -->
        <form asp-controller="Movie" asp-action="Search" method="get" class="flex flex-col gap-2">
            <label for="name-search" class="text-gray-300 text-sm">SEARCH BY NAME</label>
            <div class="flex gap-2">
                <input type="text" name="name" id="name-search" placeholder="Enter title"
                       class="flex-1 px-3 py-2 rounded bg-gray-900 border border-gray-700 text-white" />
                <button type="submit" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded text-white">GO!</button>
            </div>
        </form>
    </div>
</section>

<!-- Movie Sections -->
<div id="main" class="p-4 md:p-8 max-w-7xl mx-auto space-y-12">

    @* Latest Trailers *@
    <section>
        <div class="flex justify-between items-center border-b border-red-600 pb-2 mb-4">
            <h2 class="text-2xl font-bold">LATEST TRAILERS</h2>
            <a asp-controller="Movie" asp-action="All" class="text-red-500 hover:underline">See all</a>
        </div>
        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6">
            @foreach (var movie in Model.Newest)
            {
                @await Html.PartialAsync("../Shared/_MoviePR", movie)
            }
        </div>
    </section>

    @* Top Rated *@
    <section>
        <div class="flex justify-between items-center border-b border-red-600 pb-2 mb-4">
            <h2 class="text-2xl font-bold">TOP RATED</h2>
            <a asp-controller="Movie" asp-action="AllTopLiked" class="text-red-500 hover:underline">See all</a>
        </div>
        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6">
            @foreach (var movie in Model.TopLiked)
            {
                @await Html.PartialAsync("../Shared/_MoviePR", movie)
            }
        </div>
    </section>

    @* Most Commented *@
    <section>
        <div class="flex justify-between items-center border-b border-red-600 pb-2 mb-4">
            <h2 class="text-2xl font-bold">MOST COMMENTED</h2>
            <a asp-controller="Movie" asp-action="AllTopCommented" class="text-red-500 hover:underline">See all</a>
        </div>
        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6">
            @foreach (var movie in Model.TopCommented)
            {
                @await Html.PartialAsync("../Shared/_MoviePR", movie)
            }
        </div>
    </section>

</div>

<!-- Coming Soon Section -->
<section class="max-w-7xl mx-auto p-4 md:p-8">
    <div>
        @await Html.PartialAsync("../Shared/_ComingSoonPR", Model.ComingSoon)
    </div>
</section>

<!-- News Section -->
<section class="max-w-7xl mx-auto p-4 md:p-8">
    <div>
        @await Html.PartialAsync("../Shared/_NewsPR", Model.News)
    </div>
</section>
